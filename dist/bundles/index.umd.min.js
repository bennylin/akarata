!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib")):"function"==typeof define&&define.amd?define(["exports","tslib"],t):t(e.Akarata={},e.tslib_1)}(this,function(e,r){"use strict";var s=function(){function e(){}return e.loadWords=function(e,t){void 0===t&&(t=!1);var r=require("./irregular-words/"+e).default;return t&&(r=r.map(function(e){return e.slice(1,e.length)})),r},e.SPECIAL_LETTERS=["K","P","N","R"],e.ENDS_WITH_I=e.loadWords("akhiran-i"),e.ENDS_WITH_COMMON_CHARACTERS={kah:e.loadWords("kah"),lah:e.loadWords("lah"),pun:e.loadWords("pun"),ku:e.loadWords("ku"),mu:e.loadWords("mu"),nya:e.loadWords("nya")},e.ENDS_WITH_SUFFIX_CHARACTERS=["majikan"].concat(e.ENDS_WITH_I),e}();s.SPECIAL_LETTERS.map(function(e){s["BEGINS_WITH_"+e]=s.loadWords(""+e.toLowerCase(),!0)}),s.ON_PREFIX_CHARACTERS={meng:s.BEGINS_WITH_K,peng:s.BEGINS_WITH_K,mem:s.BEGINS_WITH_P,pem:s.BEGINS_WITH_P};var S,t,_={isStartsWith:function(e,t,r){var n=r.length;if(t<n)return!1;for(var i=0;i<n;i++)if(e[i]!==r[i])return!1;return!0},isEndsWith:function(e,t,r){var n=r.length;if(t<n)return!1;for(var i=0;i<n;i++)if(e.substring(e.length-n)[i]!==r[i])return!1;return!0}};(t=S||(S={})).start="Start",t.end="End";var n=(new(function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.stem=function(e,t){return void 0===t&&(t=!0),r.flags=void 0,e.match(/\s/)?e.split(" ").map(function(e){return r.stem(e)}):(r.numberOfSyllables=r.totalSyllables(e),r.isStillHasManySyllables()&&(e=r.removeParticle(e)),r.isStillHasManySyllables()&&(e=r.removePossessivePronoun(e)),t&&(e=r.stemDerivational(e))),e},r}return r.__extends(t,e),t.prototype.stemDerivational=function(e){var t=e.length;return this.isStillHasManySyllables()&&(e=this.removeFirstOrderPrefix(e)),t!==e.length?(t=e.length,this.isStillHasManySyllables()&&(e=this.removeSuffix(e)),t!==e.length&&(e=this.removeSecondOrderPrefix(e))):(this.isStillHasManySyllables()&&(e=this.removeSecondOrderPrefix(e)),this.isStillHasManySyllables()&&(e=this.removeSuffix(e))),e},t.prototype.isStillHasManySyllables=function(){return 2<this.numberOfSyllables},t}(function(){function f(){var E=this;this.numberOfSyllables=0,this.totalSyllables=function(e){for(var t=0,r=0,n=e;r<n.length;r++){var i=n[r];E.isVowel(i)&&t++}return t},this.removeParticle=function(e){return E.numberOfSyllables=E.numberOfSyllables||E.totalSyllables(e),e=E.removeCharactersMatchingCollection(e,E.collectionFor("particle"),S.end)},this.removePossessivePronoun=function(e){return E.numberOfSyllables=E.numberOfSyllables||E.totalSyllables(e),E.removeCharactersMatchingCollection(e,E.collectionFor("possessive_pronoun"),S.end)},this.removeFirstOrderPrefix=function(e){return E.numberOfSyllables=E.numberOfSyllables||E.totalSyllables(e),e!==(e=E.removeAndSubstituteCharactersMatchingCollection(e,E.collectionFor("special_first_order_prefix"),S.start))?e:e=E.removeCharactersMatchingCollection(e,E.collectionFor("first_order_prefix"),S.start)},this.removeSecondOrderPrefix=function(e){var t=f.REMOVED_BER,r=f.SPECIAL_SECOND_ORDER_PREFIX_WORDS;E.numberOfSyllables=E.numberOfSyllables||E.totalSyllables(e);var n=e.length;return r.includes(e)?("be"===e.slice(0,2)&&(E.flags=E.flags||t),E.reduceSyllable(),e=E.sliceWordAtPosition(e,3,S.start)):_.isStartsWith(e,n,"be")&&4<n&&!E.isVowel(e[2])&&"er"===e.slice(3,5)?(E.flags=E.flags||t,E.reduceSyllable(),e=E.sliceWordAtPosition(e,2,S.start)):E.removeCharactersMatchingCollection(e,E.collectionFor("non_special_second_order_prefix"),S.start)},this.removeSuffix=function(e){var t=f.REMOVED_KE,r=f.REMOVED_PENG,n=f.REMOVED_PE,i=f.REMOVED_DI,o=f.REMOVED_MENG,s=f.REMOVED_TER,l=f.REMOVED_BER,a=f.SUFFIX_CHARACTERS;if(E.ambiguousWithSufficesEndingWords(e))return e;E.numberOfSyllables=E.numberOfSyllables||E.totalSyllables(e);for(var u=[],c=0;c<a.length;c++){var h=a[c];switch(h){case"kan":u=[t,r,n];break;case"an":u=[i,o,s];break;case"i":u=[l,t,r]}_.isEndsWith(e,e.length,h)&&u.every(function(e){return 0==(E.flags&e)})&&(E.reduceSyllable(),e=E.sliceWordAtPosition(e,h.length,S.end))}return e}}return Object.defineProperty(f.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!0,configurable:!0}),f.prototype.ambiguousWithSufficesEndingWords=function(e){return s.ENDS_WITH_SUFFIX_CHARACTERS.includes(e)},f.prototype.removeCharactersMatchingCollection=function(e,t,r){for(var n=0;n<t.length;n++){var i=t[n];if(this.matchPositionAndNotAmbiguousWithCharacters(e,i,r)){if("mem"===i&&this.isVowel(e[i.length]))continue;this.flags=this.flags||this.collectionFor(i,"removed"),this.reduceSyllable(),e=this.sliceWordAtPosition(e,i.length,r)}}return e},f.prototype.sliceWordAtPosition=function(e,t,r){var n=r===S.start?0:-1,i=e.split("");return i.splice(n*t,t),e=i.join("")},f.prototype.removeAndSubstituteCharactersMatchingCollection=function(e,t,r){for(var n=0;n<t.length;n++){var i=t[n];this.matchingCharactersRequiresSubstitution(e,i,r)&&(this.flags=this.flags||this.collectionFor(i,"removed"),this.reduceSyllable(),e=this.substituteWordCharacter(e,i),e=this.sliceWordAtPosition(e,i.length-1,S.start))}return e},f.prototype.matchingCharactersRequiresSubstitution=function(e,t,r){return this.matchCharactersPositionFollowedByVowel(e,t,r)&&this.substitutionRequired(e,t)},f.prototype.matchCharactersPositionFollowedByVowel=function(e,t,r){var n=e.length,i=t.length;return _["is"+r+"sWith"](e,n,t)&&i<n&&this.isVowel(e[i])},f.prototype.substitutionRequired=function(e,t){return f.WITH_VOWEL_SUBSTITUTION_PREFIX_CHARACTERS.includes(t)||this.containsIrregularPrefix(e,t)},f.prototype.containsIrregularPrefix=function(e,t){return!!Object.keys(s.ON_PREFIX_CHARACTERS).includes(t)&&this.choppedWordMatchWordsCollection(e.slice(t.length,e.length),s.ON_PREFIX_CHARACTERS[t])},f.prototype.substituteWordCharacter=function(e,t){var r="";switch(!0){case["meny","peny"].includes(t):r="s";break;case["men","pen"].includes(t):r=this.choppedWordMatchWordsCollection(e.slice(t.length,e.length),s.BEGINS_WITH_N)?"n":"t";break;case["meng","peng"].includes(t):r="k";break;case["mem","pem"].includes(t):r="p"}var n=t.length-1,i=e.slice(-e.length,n),o=(e[n],e.slice(t.length));return r?i+r+o:e},f.prototype.isVowel=function(e){return f.VOWEL.includes(e)},f.prototype.collectionFor=function(e,t){var r;void 0===t&&(t="characters");if("characters"===t)r=e+"_"+t;else{switch(!0){case["meny","men","mem","me"].includes(e):e="meng";break;case["peny","pen","pem"].includes(e):e="peng"}r=t+"_"+e}return f[r.toUpperCase()]},f.prototype.matchPositionAndNotAmbiguousWithCharacters=function(e,t,r){return _["is"+r+"sWith"](e,e.length,t)&&!this.ambiguousWithCharacters(e,t,r)},f.prototype.ambiguousWithCharacters=function(t,e,r){return r===S.start?"per"===e&&this.choppedWordMatchWordsCollection(t.slice(3,t.length),s.BEGINS_WITH_R):s.ENDS_WITH_COMMON_CHARACTERS[e].some(function(e){return!!["me","be","pe"].includes(t.slice(0,2))&&_.isEndsWith(t,t.length,e)})},f.prototype.choppedWordMatchWordsCollection=function(t,e){return e.some(function(e){return _.isStartsWith(t,t.length,e)})},f.prototype.reduceSyllable=function(){this.numberOfSyllables-=1},f.VOWEL=["a","e","i","o","u"],f.PARTICLE_CHARACTERS=["kah","lah","pun"],f.POSSESSIVE_PRONOUN_CHARACTERS=["ku","mu","nya"],f.FIRST_ORDER_PREFIX_CHARACTERS=["meng","meny","men","mem","me","peng","peny","pen","pem","di","ter","ke"],f.SPECIAL_FIRST_ORDER_PREFIX_CHARACTERS=["meng","peng","meny","peny","pen","men","mem","pem"],f.SECOND_ORDER_PREFIX_CHARACTERS=["ber","be","per","pe"],f.SPECIAL_SECOND_ORDER_PREFIX_CHARACTERS=["be"],f.NON_SPECIAL_SECOND_ORDER_PREFIX_CHARACTERS=["ber","per","pe"],f.SPECIAL_SECOND_ORDER_PREFIX_WORDS=["belajar","pelajar","belunjur"],f.SUFFIX_CHARACTERS=["kan","an","i"],f.WITH_VOWEL_SUBSTITUTION_PREFIX_CHARACTERS=["meny","peny","men","pen"],f.REMOVED_KE=1,f.REMOVED_PENG=2,f.REMOVED_DI=4,f.REMOVED_MENG=8,f.REMOVED_TER=16,f.REMOVED_BER=32,f.REMOVED_PE=64,f}()))).stem,i={stem:n};e.stem=n,e.default=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map
