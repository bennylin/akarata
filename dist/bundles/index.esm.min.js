class IrregularWords{static loadWords(t,e=!1){let r=require(`./irregular-words/${t}`).default;return e&&(r=r.map(t=>t.slice(1,t.length))),r}}function isStartsWith(t,e,r){const i=r.length;if(i>e)return!1;for(let e=0;e<i;e++)if(t[e]!==r[e])return!1;return!0}function isEndsWith(t,e,r){const i=r.length;if(i>e)return!1;for(let e=0;e<i;e++)if(t.substring(t.length-i)[e]!==r[e])return!1;return!0}IrregularWords.SPECIAL_LETTERS=["K","P","N","R"],IrregularWords.ENDS_WITH_I=IrregularWords.loadWords("akhiran-i"),IrregularWords.ENDS_WITH_COMMON_CHARACTERS={kah:IrregularWords.loadWords("kah"),lah:IrregularWords.loadWords("lah"),pun:IrregularWords.loadWords("pun"),ku:IrregularWords.loadWords("ku"),mu:IrregularWords.loadWords("mu"),nya:IrregularWords.loadWords("nya")},IrregularWords.ENDS_WITH_SUFFIX_CHARACTERS=["majikan"].concat(IrregularWords.ENDS_WITH_I),IrregularWords.SPECIAL_LETTERS.map(t=>{IrregularWords[`BEGINS_WITH_${t}`]=IrregularWords.loadWords(`${t.toLowerCase()}`,!0)}),IrregularWords.ON_PREFIX_CHARACTERS={meng:IrregularWords.BEGINS_WITH_K,peng:IrregularWords.BEGINS_WITH_K,mem:IrregularWords.BEGINS_WITH_P,pem:IrregularWords.BEGINS_WITH_P};var Position,StemmerUtility={isStartsWith:isStartsWith,isEndsWith:isEndsWith};!function(t){t.start="Start",t.end="End"}(Position||(Position={}));class MorphologicalUtility{constructor(){this.numberOfSyllables=0,this.totalSyllables=(t=>{let e=0;for(const r of t)this.isVowel(r)&&e++;return e}),this.removeParticle=(t=>(this.numberOfSyllables=this.numberOfSyllables||this.totalSyllables(t),t=this.removeCharactersMatchingCollection(t,this.collectionFor("particle"),Position.end))),this.removePossessivePronoun=(t=>(this.numberOfSyllables=this.numberOfSyllables||this.totalSyllables(t),this.removeCharactersMatchingCollection(t,this.collectionFor("possessive_pronoun"),Position.end))),this.removeFirstOrderPrefix=(t=>{return this.numberOfSyllables=this.numberOfSyllables||this.totalSyllables(t),t!==(t=this.removeAndSubstituteCharactersMatchingCollection(t,this.collectionFor("special_first_order_prefix"),Position.start))?t:t=this.removeCharactersMatchingCollection(t,this.collectionFor("first_order_prefix"),Position.start)}),this.removeSecondOrderPrefix=(t=>{const{REMOVED_BER:e,SPECIAL_SECOND_ORDER_PREFIX_WORDS:r}=MorphologicalUtility;this.numberOfSyllables=this.numberOfSyllables||this.totalSyllables(t);const i=t.length;return r.includes(t)?("be"===t.slice(0,2)&&(this.flags=this.flags||e),this.reduceSyllable(),t=this.sliceWordAtPosition(t,3,Position.start)):StemmerUtility.isStartsWith(t,i,"be")&&i>4&&!this.isVowel(t[2])&&"er"===t.slice(3,5)?(this.flags=this.flags||e,this.reduceSyllable(),t=this.sliceWordAtPosition(t,2,Position.start)):this.removeCharactersMatchingCollection(t,this.collectionFor("non_special_second_order_prefix"),Position.start)}),this.removeSuffix=(t=>{const{REMOVED_KE:e,REMOVED_PENG:r,REMOVED_PE:i,REMOVED_DI:s,REMOVED_MENG:l,REMOVED_TER:o,REMOVED_BER:a,SUFFIX_CHARACTERS:n}=MorphologicalUtility;if(this.ambiguousWithSufficesEndingWords(t))return t;this.numberOfSyllables=this.numberOfSyllables||this.totalSyllables(t);let h=[];for(let c=0;c<n.length;c++){const u=n[c];switch(u){case"kan":h=[e,r,i];break;case"an":h=[s,l,o];break;case"i":h=[a,e,r]}StemmerUtility.isEndsWith(t,t.length,u)&&h.every(t=>0==(this.flags&t))&&(this.reduceSyllable(),t=this.sliceWordAtPosition(t,u.length,Position.end))}return t})}set flags(t){this._flags=t}get flags(){return this._flags}ambiguousWithSufficesEndingWords(t){return IrregularWords.ENDS_WITH_SUFFIX_CHARACTERS.includes(t)}removeCharactersMatchingCollection(t,e,r){for(let i=0;i<e.length;i++){const s=e[i];if(this.matchPositionAndNotAmbiguousWithCharacters(t,s,r)){if("mem"===s&&this.isVowel(t[s.length]))continue;this.flags=this.flags||this.collectionFor(s,"removed"),this.reduceSyllable(),t=this.sliceWordAtPosition(t,s.length,r)}}return t}sliceWordAtPosition(t,e,r){const i=r===Position.start?0:-1,s=t.split("");return s.splice(i*e,e),t=s.join("")}removeAndSubstituteCharactersMatchingCollection(t,e,r){for(let i=0;i<e.length;i++){const s=e[i];this.matchingCharactersRequiresSubstitution(t,s,r)&&(this.flags=this.flags||this.collectionFor(s,"removed"),this.reduceSyllable(),t=this.substituteWordCharacter(t,s),t=this.sliceWordAtPosition(t,s.length-1,Position.start))}return t}matchingCharactersRequiresSubstitution(t,e,r){return this.matchCharactersPositionFollowedByVowel(t,e,r)&&this.substitutionRequired(t,e)}matchCharactersPositionFollowedByVowel(t,e,r){const i=t.length,s=e.length;return StemmerUtility[`is${r}sWith`](t,i,e)&&i>s&&this.isVowel(t[s])}substitutionRequired(t,e){return MorphologicalUtility.WITH_VOWEL_SUBSTITUTION_PREFIX_CHARACTERS.includes(e)||this.containsIrregularPrefix(t,e)}containsIrregularPrefix(t,e){return!!Object.keys(IrregularWords.ON_PREFIX_CHARACTERS).includes(e)&&this.choppedWordMatchWordsCollection(t.slice(e.length,t.length),IrregularWords.ON_PREFIX_CHARACTERS[e])}substituteWordCharacter(t,e){let r="";switch(!0){case["meny","peny"].includes(e):r="s";break;case["men","pen"].includes(e):r=this.choppedWordMatchWordsCollection(t.slice(e.length,t.length),IrregularWords.BEGINS_WITH_N)?"n":"t";break;case["meng","peng"].includes(e):r="k";break;case["mem","pem"].includes(e):r="p"}const i=e.length-1,s=t.slice(-t.length,i),l=(t[i],t.slice(e.length));return r?s+r+l:t}isVowel(t){return MorphologicalUtility.VOWEL.includes(t)}collectionFor(t,e="characters"){let r;const i=["peny","pen","pem"];if("characters"===e)r=`${t}_${e}`;else{switch(!0){case["meny","men","mem","me"].includes(t):t="meng";break;case i.includes(t):t="peng"}r=`${e}_${t}`}const s=r.toUpperCase();return MorphologicalUtility[s]}matchPositionAndNotAmbiguousWithCharacters(t,e,r){return StemmerUtility[`is${r}sWith`](t,t.length,e)&&!this.ambiguousWithCharacters(t,e,r)}ambiguousWithCharacters(t,e,r){return r===Position.start?"per"===e&&this.choppedWordMatchWordsCollection(t.slice(3,t.length),IrregularWords.BEGINS_WITH_R):IrregularWords.ENDS_WITH_COMMON_CHARACTERS[e].some(e=>{return!!["me","be","pe"].includes(t.slice(0,2))&&StemmerUtility.isEndsWith(t,t.length,e)})}choppedWordMatchWordsCollection(t,e){return e.some(e=>StemmerUtility.isStartsWith(t,t.length,e))}reduceSyllable(){this.numberOfSyllables-=1}}MorphologicalUtility.VOWEL=["a","e","i","o","u"],MorphologicalUtility.PARTICLE_CHARACTERS=["kah","lah","pun"],MorphologicalUtility.POSSESSIVE_PRONOUN_CHARACTERS=["ku","mu","nya"],MorphologicalUtility.FIRST_ORDER_PREFIX_CHARACTERS=["meng","meny","men","mem","me","peng","peny","pen","pem","di","ter","ke"],MorphologicalUtility.SPECIAL_FIRST_ORDER_PREFIX_CHARACTERS=["meng","peng","meny","peny","pen","men","mem","pem"],MorphologicalUtility.SECOND_ORDER_PREFIX_CHARACTERS=["ber","be","per","pe"],MorphologicalUtility.SPECIAL_SECOND_ORDER_PREFIX_CHARACTERS=["be"],MorphologicalUtility.NON_SPECIAL_SECOND_ORDER_PREFIX_CHARACTERS=["ber","per","pe"],MorphologicalUtility.SPECIAL_SECOND_ORDER_PREFIX_WORDS=["belajar","pelajar","belunjur"],MorphologicalUtility.SUFFIX_CHARACTERS=["kan","an","i"],MorphologicalUtility.WITH_VOWEL_SUBSTITUTION_PREFIX_CHARACTERS=["meny","peny","men","pen"],MorphologicalUtility.REMOVED_KE=1,MorphologicalUtility.REMOVED_PENG=2,MorphologicalUtility.REMOVED_DI=4,MorphologicalUtility.REMOVED_MENG=8,MorphologicalUtility.REMOVED_TER=16,MorphologicalUtility.REMOVED_BER=32,MorphologicalUtility.REMOVED_PE=64;class Stemmer extends MorphologicalUtility{constructor(){super(...arguments),this.stem=((t,e=!0)=>(this.flags=void 0,t.match(/\s/)?t.split(" ").map(t=>this.stem(t)):(this.numberOfSyllables=this.totalSyllables(t),this.isStillHasManySyllables()&&(t=this.removeParticle(t)),this.isStillHasManySyllables()&&(t=this.removePossessivePronoun(t)),e&&(t=this.stemDerivational(t))),t))}stemDerivational(t){let e=t.length;return this.isStillHasManySyllables()&&(t=this.removeFirstOrderPrefix(t)),e!==t.length?(e=t.length,this.isStillHasManySyllables()&&(t=this.removeSuffix(t)),e!==t.length&&(t=this.removeSecondOrderPrefix(t))):(this.isStillHasManySyllables()&&(t=this.removeSecondOrderPrefix(t)),this.isStillHasManySyllables()&&(t=this.removeSuffix(t))),t}isStillHasManySyllables(){return this.numberOfSyllables>2}}var stemmer=new Stemmer;const{stem:stem}=stemmer;var index={stem:stem};export default index;export{stem};
//# sourceMappingURL=index.esm.min.js.map
